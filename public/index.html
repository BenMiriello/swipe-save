<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ComfyUI Media Viewer</title>
  <link rel="stylesheet" href="styles.css">
  <!-- ComfyUI Module Styles -->
  <link rel="stylesheet" href="js/comfyui/styles/modal.css">
  <link rel="stylesheet" href="js/comfyui/styles/components.css">
  <!-- Directory Manager Styles -->
  <link rel="stylesheet" href="css/directory-manager.css">
  <!-- ComfyUI Section Components Styles -->
  <link rel="stylesheet" href="css/comfyui-sections.css">
  <!-- Pagination Styles -->
  <link rel="stylesheet" href="css/pagination.css">
  <!-- Alpine List View Styles -->
  <link rel="stylesheet" href="css/alpine-list-view.css">

  <!-- Core Application Initialization -->
  <script src="js/core/template-loader.js"></script>
  <script src="js/core/app-init.js"></script>
</head>
<body>
  <div class="container">
    <div class="header-container">
      <div class="header-left">
        <div id="options-dropdown-container"></div>
        
        <!-- Navigation Buttons - Just to the right of Options -->
        <button id="backToListButton" class="icon-button nav-button" title="Back to List" style="display: block; margin-left: 8px;">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M19 12H6m6 6l-6-6 6-6"/>
          </svg>
        </button>
        
        <button id="openFileButton" class="icon-button nav-button" title="Open File" style="display: block; margin-left: 8px;">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
            <circle cx="9" cy="9" r="2"/>
            <path d="M21 15l-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/>
          </svg>
        </button>
        
        <button id="listViewButton" class="icon-button back-to-list-icon" title="Back to List View" style="display: none;">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
      </div>
      
      <!-- Unified Navigation Component -->
      <div class="nav-shortcuts" id="navShortcuts" style="display: flex; align-items: center; gap: 8px; margin-left: 16px;">
        <!-- List View Button (shown in single view) -->
        <button class="icon-button nav-list-btn" id="navListBtn" title="File List" style="display: none;" onclick="goToListView()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="8" y1="6" x2="21" y2="6"></line>
            <line x1="8" y1="12" x2="21" y2="12"></line>
            <line x1="8" y1="18" x2="21" y2="18"></line>
            <line x1="3" y1="6" x2="3.01" y2="6"></line>
            <line x1="3" y1="12" x2="3.01" y2="12"></line>
            <line x1="3" y1="18" x2="3.01" y2="18"></line>
          </svg>
        </button>
        
      </div>
      
      <h1 id="appTitle">Swipe-Save</h1>
      <div class="header-icons">
        <button class="icon-button reload-icon" title="Reload Media">
          <svg width="50px" height="50px" stroke="currentColor" stroke-width="1" fill="currentColor" color="currentColor" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg"><path d="M25 38c-7.2 0-13-5.8-13-13 0-3.2 1.2-6.2 3.3-8.6l1.5 1.3C15 19.7 14 22.3 14 25c0 6.1 4.9 11 11 11 1.6 0 3.1-.3 4.6-1l.8 1.8c-1.7.8-3.5 1.2-5.4 1.2z"/><path d="M34.7 33.7l-1.5-1.3c1.8-2 2.8-4.6 2.8-7.3 0-6.1-4.9-11-11-11-1.6 0-3.1.3-4.6 1l-.8-1.8c1.7-.8 3.5-1.2 5.4-1.2 7.2 0 13 5.8 13 13 0 3.1-1.2 6.2-3.3 8.6z"/><path d="M18 24h-2v-6h-6v-2h8z"/><path d="M40 34h-8v-8h2v6h6z"/></svg>
        </button>
        <button class="icon-button save-icon" title="Download">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
        </button>
        <button class="icon-button comfyui-icon" title="Load in ComfyUI">&#x2192;</button>
      </div>
    </div>

    <div class="media-container">
      <!-- Media items will be loaded here -->
      <div id="mediaList" class="media-list"></div>
    </div>
  </div>

  <!-- Modal for custom filename -->
  <div id="filenameModal" class="modal">
    <div class="modal-content">
      <h2>
        <span class="modal-title">Custom Filename</span>
        <span class="close-modal">&times;</span>
      </h2>
      <input type="text" id="customFilename" placeholder="Enter new filename">
      <button id="saveFilename">Save</button>
    </div>
  </div>


  <!-- ComfyUI Modal Container (loaded dynamically) -->
  <div id="comfyui-modal-container"></div>

  <!-- External libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>

  <!-- Application Module Loader -->
  <script src="js/core/module-loader.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.14.1/dist/cdn.min.js" defer></script>
</body>
</html>
